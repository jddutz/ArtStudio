# ArtStudio Copilot Instructions

## Project Overview

ArtStudio is an experimental desktop application that combines generative AI tools with basic graphics editing features. Built using WPF with MaterialDesign theming, it provides a modern, professional interface for creative workflows.

## Technology Stack

### Core Framework

- **Platform**: .NET 8.0 Windows Desktop Application
- **UI Framework**: WPF (Windows Presentation Foundation)
- **Architecture**: MVVM (Model-View-ViewModel) pattern
- **Dependency Injection**: Microsoft.Extensions.DependencyInjection with hosting support
- **Logging**: Microsoft.Extensions.Logging for structured logging

### Key Libraries

- **MaterialDesignThemes**: Modern Material Design UI components and theming
- **MaterialDesignColors**: Color palette and theming support
- **Dirkster.AvalonDock**: Professional docking system for tool palettes
- **SkiaSharp**: 2D graphics API for custom drawing controls (with WPF views)
- **System.Drawing.Common**: Image processing capabilities
- **Microsoft.Extensions.Hosting**: Application hosting and service management

### Testing & CI/CD

- **Testing Framework**: xUnit
- **CI/CD**: GitHub Actions (build.yml, release.yml)
- **Package Manager**: NuGet
- **Build Tools**: VS Code tasks, convenience batch scripts
- **IDE Integration**: VS Code tasks.json for streamlined development

## Project Structure

```
ArtStudio/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ ArtStudio.WPF/           # Main WPF application with MaterialDesign UI
â”‚   â”‚   â”œâ”€â”€ Views/               # User controls for UI components
â”‚   â”‚   â”œâ”€â”€ ViewModels/          # MVVM ViewModels
â”‚   â”‚   â”œâ”€â”€ Services/            # WPF-specific services (DockingService, WindowManager)
â”‚   â”‚   â”œâ”€â”€ Themes/              # Custom MaterialDesign themes
â”‚   â”‚   â”œâ”€â”€ App.xaml/cs          # Application entry point with theming
â”‚   â”‚   â””â”€â”€ MainWindow.xaml/cs   # Main application window with AvalonDock
â”‚   â”œâ”€â”€ ArtStudio.Core/          # Core business logic and interfaces
â”‚   â”‚   â”œâ”€â”€ Interfaces/          # Service interfaces (ILayoutManager, IEditorService)
â”‚   â”‚   â””â”€â”€ Services/            # Core service implementations
â”‚   â”œâ”€â”€ ArtStudio.UI/            # Shared UI components (currently minimal)
â”‚   â””â”€â”€ ArtStudio.AI/            # AI integration modules (future implementation)
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ ArtStudio.Tests/         # Unit tests using xUnit
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/               # CI/CD pipeline definitions
â”œâ”€â”€ docs/                        # Documentation files
â”œâ”€â”€ run.bat                      # Convenience script for quick development runs
â”œâ”€â”€ publish.bat                  # Convenience script for publishing releases
â””â”€â”€ .vscode/tasks.json          # VS Code task definitions for building
```

## Design System & Theming

### MaterialDesign Integration

- **Base Theme**: Dark theme with MaterialDesign 3.0 principles
- **Primary Color**: Purple (#6B46C1) - optimized for creative applications
- **Secondary Color**: Pink (#EC4899) - accent color for highlights
- **Surface Colors**: Dark grays for panels and cards
- **Typography**: MaterialDesign font stack with proper hierarchy

### Custom Theme Resources

- **ArtStudioTheme.xaml**: Custom color palette and component styles
- **Generic.xaml**: Application-wide style overrides
- **Component Styles**: Custom button styles, card layouts, tool palettes

### Key UI Components

- **Tool Palette**: MaterialDesign cards with icon buttons and sliders
- **Layer Palette**: Modern layer management with visibility toggles
- **Editor Canvas**: Scrollable drawing area with welcome overlay
- **Docking System**: AvalonDock integration for flexible workspace layouts

### Development Guidelines

### Code Organization

- Follow MVVM pattern strictly
- Use Microsoft.Extensions.DependencyInjection for services
- Implement INotifyPropertyChanged for ViewModels
- Keep business logic in Core project
- UI-specific code belongs in WPF project
- Use structured logging with ILogger<T>

### Styling Guidelines

- Use MaterialDesign components whenever possible
- Reference custom theme resources: `{StaticResource ArtStudio.*}`
- Maintain consistent spacing and typography
- Use MaterialDesign icons via `materialDesign:PackIcon`

### Service Registration

- Register services in App.xaml.cs using IServiceCollection
- Use constructor injection for ViewModels and services
- Follow single responsibility principle for service design
- Create interfaces for all services to enable testing

### Adding New Features

1. **Core Logic**: Add interfaces to `ArtStudio.Core/Interfaces/`
2. **Implementation**: Create services in `ArtStudio.Core/Services/`
3. **Service Registration**: Register services in `App.xaml.cs` DI container
4. **UI Components**: Create Views in `ArtStudio.WPF/Views/`
5. **ViewModels**: Add ViewModels in `ArtStudio.WPF/ViewModels/` with constructor injection
6. **Styling**: Extend themes in `ArtStudio.WPF/Themes/`
7. **Testing**: Create unit tests with mocked dependencies

### Testing Strategy

- Unit tests for core business logic using xUnit
- ViewModels should be testable without UI dependencies
- Mock external dependencies using interfaces and DI
- Focus on critical drawing and AI integration features
- Use IServiceCollection for test service setup

## Current Status & Priorities

### Implemented âœ…

- Project structure and build system with CI/CD pipeline
- MaterialDesign theming and custom color scheme
- MVVM architecture with proper dependency injection
- Microsoft.Extensions.DependencyInjection integration
- AvalonDock integration for dockable panels
- Tool palette, layer palette, and editor views with MaterialDesign styling
- Structured logging with Microsoft.Extensions.Logging
- VS Code integration with tasks.json
- Convenience scripts (run.bat, publish.bat) for development workflow
- Comprehensive unit testing framework setup

### Next Priorities ðŸŽ¯

1. **Drawing Engine**: Implement SkiaSharp-based drawing on canvas
2. **Tool System**: Create brush, eraser, and selection tools
3. **Layer Management**: Implement actual layer functionality
4. **File I/O**: Add save/load capabilities for projects
5. **AI Integration**: Connect AI services for image generation

### Future Enhancements ðŸš€

- Real-time collaborative editing
- Plugin system for custom tools
- Advanced image filters and effects
- Cloud storage integration
- Touch and stylus support

## Development Commands

### **VS Code Integration (Recommended for Development)**

```powershell
# Using VS Code tasks (Ctrl+Shift+P â†’ "Tasks: Run Task")
# - build: Debug build
# - build-release: Release build
# - run: Build and run
# - test: Run unit tests

# Using debugger (F5)
# - Launch ArtStudio (Debug): Debug with breakpoints
# - Launch ArtStudio (Release): Release testing
```

### **Command Line Options**

```powershell
# Quick development (Windows)
.\run.bat              # Debug build and run
.\dev.bat              # Interactive development menu
.\publish.bat          # Create release distribution

# Manual dotnet commands
dotnet build --configuration Debug
dotnet run --project src/ArtStudio.WPF --configuration Debug
dotnet test --configuration Debug
```

### **CI/CD Pipeline**

- **GitHub Actions**: Automated build/test/release on push/PR
- **Artifacts**: Generated for every successful build
- **Releases**: Automated publishing on GitHub releases

## Architecture Notes

### MVVM Implementation

- ViewModels use `INotifyPropertyChanged` with helper methods
- Commands implemented via `RelayCommand` pattern
- Services injected into ViewModels via constructor with DI container
- Application lifecycle managed via Microsoft.Extensions.Hosting

### MaterialDesign Integration

- Theme resources loaded in App.xaml
- Custom color palette extends MaterialDesign base
- Icons used consistently throughout interface
- Cards and elevation provide visual hierarchy

### Dependency Injection

- Services registered in App.xaml.cs with IServiceCollection
- Constructor injection used throughout application
- Service lifetimes properly managed (Singleton, Transient, Scoped)
- Mock-friendly design for unit testing

### Future Considerations

- Consider upgrading to CommunityToolkit.Mvvm for better MVVM support
- Add configuration system for user preferences using IOptions pattern
- Consider Prism or similar framework for modular architecture
- Implement proper error handling and logging strategies

## Contributing Guidelines

When contributing to ArtStudio:

1. **Follow MaterialDesign**: Use MaterialDesign components and follow design principles
2. **Maintain Architecture**: Respect MVVM separation and dependency injection
3. **Test Coverage**: Add unit tests for new functionality
4. **Documentation**: Update this file when adding major features
5. **Consistency**: Follow existing naming conventions and code style
6. **Performance**: Consider drawing performance for real-time operations

## Resources

- [MaterialDesign in XAML](https://materialdesigninxaml.net/)
- [AvalonDock Documentation](https://github.com/Dirkster99/AvalonDock)
- [SkiaSharp Documentation](https://docs.microsoft.com/en-us/xamarin/xamarin-forms/user-interface/graphics/skiasharp/)
- [WPF MVVM Pattern](https://docs.microsoft.com/en-us/dotnet/desktop/wpf/data/data-binding-overview)

---

_For detailed project overview, see README.md. For technical specifications, see TechnicalRequirements.md._
